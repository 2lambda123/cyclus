<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CYCLUS: cyclus::MockSim Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CYCLUS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecyclus.html">cyclus</a></li><li class="navelem"><a class="el" href="classcyclus_1_1MockSim.html">MockSim</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classcyclus_1_1MockSim-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cyclus::MockSim Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classcyclus_1_1MockSim.html" title="MockSim is a helper for running full simulations entirely in-code to test archetypes/agents without h...">MockSim</a> is a helper for running full simulations entirely in-code to test archetypes/agents without having to deal with input files, output database files, and other pieces of the full Cyclus stack. </p>
<p>This is especially convenient for writing unit-like tests (e.g. using gtest) for your archetype's in-simulation behavior. Initialize the <a class="el" href="classcyclus_1_1MockSim.html" title="MockSim is a helper for running full simulations entirely in-code to test archetypes/agents without h...">MockSim</a> indicating the archetype you want to test and the simulation duration. Then add any number of sources and/or sinks to transact with your agent. They can have specific recipes (or not) and their deployment and lifetime (before decommissioning) can be specified too. Here is an example using the agents:Source archetype in Cyclus as the tested agent:</p>
<div class="fragment"><div class="line"><a class="code" href="namespacecyclus.html#a66de06f3d3c1e2f8f401f11fb119217c">cyclus::CompMap</a> m;</div><div class="line">m[922350000] = .05;</div><div class="line">m[922380000] = .95;</div><div class="line"><a class="code" href="classcyclus_1_1Composition.html#a382b7d2e82b935476b1f4213a15f3eee">cyclus::Composition::Ptr</a> fresh = <a class="code" href="classcyclus_1_1Composition.html#a1f017a1d3a051022da400d51901ccef6">cyclus::Composition::CreateFromMass</a>(m);</div><div class="line"></div><div class="line"><a class="code" href="namespacehdf5__back__gen.html#ae5ac42df1b8f6706d01be307221c68cd">std::string</a> config =</div><div class="line">    <span class="stringliteral">&quot;&lt;commod&gt;enriched_u&lt;/commod&gt;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;&lt;recipe_name&gt;fresh_fuel&lt;/recipe_name&gt;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;&lt;capacity&gt;10&lt;/capacity&gt;&quot;</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> dur = 10;</div><div class="line"><a class="code" href="classcyclus_1_1MockSim.html">cyclus::MockSim</a> sim(<a class="code" href="classcyclus_1_1AgentSpec.html">cyclus::AgentSpec</a>(<span class="stringliteral">&quot;:agents:Source&quot;</span>), config, dur);</div><div class="line">sim.AddSink(<span class="stringliteral">&quot;enriched_u&quot;</span>).Finalize();</div><div class="line">sim.AddRecipe(<span class="stringliteral">&quot;fresh_fuel&quot;</span>, fresh);</div><div class="line"><span class="keywordtype">int</span> src_id = sim.Run(); <span class="comment">// capture the agent ID of the facility being tested</span></div></div><!-- fragment --><p>Querying the results can be accomplished by getting a reference to the in-memory database generated. Not all data that is present in normal full-stack simulations is available. However, most of the key core tables are fully available. Namely, the Transactions, <a class="el" href="classcyclus_1_1Composition.html" title="An immutable object responsible for holding a nuclide composition. ">Composition</a>, Resources, ResCreators, AgentEntry, and AgentExit tables are available. Any custom-tables created by the tested archetype will also be available. Here is a sample query and test you might write if using the googletest framework:</p>
<div class="fragment"><div class="line"><span class="comment">// return all transactions where our source facility is the sender</span></div><div class="line">std::vector&lt;cyclus::Cond&gt; conds;</div><div class="line">conds.push_back(<span class="stringliteral">&quot;SenderId&quot;</span>, <span class="stringliteral">&quot;==&quot;</span>, src_id);</div><div class="line"><a class="code" href="classcyclus_1_1QueryResult.html">cyclus::QueryResult</a> qr = sim.db().Query(<span class="stringliteral">&quot;Transactions&quot;</span>, &amp;conds);</div><div class="line"><span class="keywordtype">int</span> n_trans = qr.<a class="code" href="classcyclus_1_1QueryResult.html#a1460e5b12034f324de6b87f522d8e164">rows</a>.size();</div><div class="line">EXPECT_EQ(10, n_trans) &lt;&lt; <span class="stringliteral">&quot;expected 10 transactions, got &quot;</span> &lt;&lt; n_trans;</div><div class="line"></div><div class="line"><span class="comment">// reconstruct the material object for the first transaction</span></div><div class="line"><span class="keywordtype">int</span> res_id = qr.<a class="code" href="classcyclus_1_1QueryResult.html#a915144c67f70af5e35c73eabddb67cde">GetVal</a>&lt;<span class="keywordtype">int</span>&gt;(<span class="stringliteral">&quot;ResourceId&quot;</span>, 0);</div><div class="line"><a class="code" href="classcyclus_1_1Material.html#a7ccfc89ee031403e889e16c9f72a4c24">cyclus::Material::Ptr</a> m = sim.GetMaterial(res_id);</div><div class="line">EXPECT_DOUBLE_EQ(10, m-&gt;quantity());</div><div class="line"></div><div class="line"><span class="comment">// confirm composition is as expected</span></div><div class="line"><a class="code" href="classcyclus_1_1toolkit_1_1MatQuery.html">cyclus::toolkit::MatQuery</a> mq(m);</div><div class="line">EXPECT_DOUBLE_EQ(0.5, mq.mass(922350000));</div><div class="line">EXPECT_DOUBLE_EQ(9.5, mq.mass(922380000));</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="mock__sim_8h_source.html#l00132">132</a> of file <a class="el" href="mock__sim_8h_source.html">mock_sim.h</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="mock__sim_8h_source.html">mock_sim.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a36348b9239bf2537c5aeda3b53dd2a3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a36348b9239bf2537c5aeda3b53dd2a3a">AddRecipe</a> (std::string name, <a class="el" href="classcyclus_1_1Composition.html#a382b7d2e82b935476b1f4213a15f3eee">Composition::Ptr</a> c)</td></tr>
<tr class="separator:a36348b9239bf2537c5aeda3b53dd2a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20cb13b8d338ec41fb977cbcc29dad79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1MockAgent.html">MockAgent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a20cb13b8d338ec41fb977cbcc29dad79">AddSink</a> (std::string commod)</td></tr>
<tr class="separator:a20cb13b8d338ec41fb977cbcc29dad79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af57d6256c07b7dd1a006e3de5d801ff9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1MockAgent.html">MockAgent</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#af57d6256c07b7dd1a006e3de5d801ff9">AddSource</a> (std::string commod)</td></tr>
<tr class="separator:af57d6256c07b7dd1a006e3de5d801ff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04dcb9b3cb773f76b3b7e24e3e8cfa65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1Context.html">Context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a04dcb9b3cb773f76b3b7e24e3e8cfa65">context</a> ()</td></tr>
<tr class="separator:a04dcb9b3cb773f76b3b7e24e3e8cfa65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1caea21dddf3174b59ae8e64e2b74d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1SqliteBack.html">SqliteBack</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a9d1caea21dddf3174b59ae8e64e2b74d">db</a> ()</td></tr>
<tr class="separator:a9d1caea21dddf3174b59ae8e64e2b74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a802dd8c8efd62e99bc28bbe9ba659466"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a802dd8c8efd62e99bc28bbe9ba659466">DummyProto</a> (std::string name)</td></tr>
<tr class="separator:a802dd8c8efd62e99bc28bbe9ba659466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab2f78dd4099a350f30bc2519bb5049"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#aeab2f78dd4099a350f30bc2519bb5049">DummyProto</a> (std::string name, std::string commod, double capacity)</td></tr>
<tr class="separator:aeab2f78dd4099a350f30bc2519bb5049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8852e6fa1abb5b0a0c1c785fe482fedd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1Material.html#a7ccfc89ee031403e889e16c9f72a4c24">Material::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a8852e6fa1abb5b0a0c1c785fe482fedd">GetMaterial</a> (int resid)</td></tr>
<tr class="separator:a8852e6fa1abb5b0a0c1c785fe482fedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ac44fdf5871792df87cc6cd225961aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1Product.html#a6c3f8020c3bc4cc95cced9c29e7f9c14">Product::Ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a1ac44fdf5871792df87cc6cd225961aa">GetProduct</a> (int resid)</td></tr>
<tr class="separator:a1ac44fdf5871792df87cc6cd225961aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0914020e7a3a5f094050c3734549b380"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a0914020e7a3a5f094050c3734549b380">MockSim</a> (int duration)</td></tr>
<tr class="separator:a0914020e7a3a5f094050c3734549b380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015b33fd78ecada4b43f0de6a01b3cc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a015b33fd78ecada4b43f0de6a01b3cc6">MockSim</a> (<a class="el" href="classcyclus_1_1AgentSpec.html">AgentSpec</a> spec, std::string config, int duration)</td></tr>
<tr class="separator:a015b33fd78ecada4b43f0de6a01b3cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13a48e717f19fca3c9f84ecb453c9dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#ac13a48e717f19fca3c9f84ecb453c9dc">MockSim</a> (<a class="el" href="classcyclus_1_1AgentSpec.html">AgentSpec</a> spec, std::string config, int duration, int lifetime)</td></tr>
<tr class="separator:ac13a48e717f19fca3c9f84ecb453c9dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaf44f17a5c3b4d8ab9575ebece85bdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#aeaf44f17a5c3b4d8ab9575ebece85bdf">Run</a> ()</td></tr>
<tr class="separator:aeaf44f17a5c3b4d8ab9575ebece85bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68aacc05650abec8367968492dc01699"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a68aacc05650abec8367968492dc01699">~MockSim</a> ()</td></tr>
<tr class="separator:a68aacc05650abec8367968492dc01699"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7efe5415fa56ceec7313baf5a6303dfa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcyclus_1_1Agent.html">Agent</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcyclus_1_1MockSim.html#a7efe5415fa56ceec7313baf5a6303dfa">agent</a></td></tr>
<tr class="separator:a7efe5415fa56ceec7313baf5a6303dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0914020e7a3a5f094050c3734549b380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0914020e7a3a5f094050c3734549b380">&#9670;&nbsp;</a></span>MockSim() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cyclus::MockSim::MockSim </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initializes a new empty mock simulation environment where duration is the length of the simulation in time steps. </p>
<p>An agent must be specified before running an empty-constructed <a class="el" href="classcyclus_1_1MockSim.html" title="MockSim is a helper for running full simulations entirely in-code to test archetypes/agents without h...">MockSim</a> (i.e. manually construct an agent using <a class="el" href="classcyclus_1_1MockSim.html#a04dcb9b3cb773f76b3b7e24e3e8cfa65" title="Returns the context for the mock simulation environment. ">MockSim::context()</a> and setting <a class="el" href="classcyclus_1_1MockSim.html#a7efe5415fa56ceec7313baf5a6303dfa" title="the agent being tested by the mock simulation environment. ">MockSim::agent</a>. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00115">115</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a015b33fd78ecada4b43f0de6a01b3cc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015b33fd78ecada4b43f0de6a01b3cc6">&#9670;&nbsp;</a></span>MockSim() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cyclus::MockSim::MockSim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcyclus_1_1AgentSpec.html">AgentSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initializes a new mock simulation environment to test the archetype identified by spec. </p>
<p>config should contain the archetype-specific xml snippet excluding the wrapping "&lt;config&gt;" and "&lt;[AgentName]&gt;" tags. duration is the length of the simulation in time steps. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00124">124</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="ac13a48e717f19fca3c9f84ecb453c9dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac13a48e717f19fca3c9f84ecb453c9dc">&#9670;&nbsp;</a></span>MockSim() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cyclus::MockSim::MockSim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcyclus_1_1AgentSpec.html">AgentSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lifetime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initializes a new mock simulation environment to test the archetype identified by spec. </p>
<p>config should contain the archetype-specific xml snippet excluding the wrapping "&lt;config&gt;" and "&lt;[AgentName]&gt;" tags. duration is the length of the simulation in time steps. 'lifetime' is the lifetime of the agent being tested. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00143">143</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a68aacc05650abec8367968492dc01699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68aacc05650abec8367968492dc01699">&#9670;&nbsp;</a></span>~MockSim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cyclus::MockSim::~MockSim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00193">193</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a36348b9239bf2537c5aeda3b53dd2a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36348b9239bf2537c5aeda3b53dd2a3a">&#9670;&nbsp;</a></span>AddRecipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cyclus::MockSim::AddRecipe </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcyclus_1_1Composition.html#a382b7d2e82b935476b1f4213a15f3eee">Composition::Ptr</a>&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AddRecipe adds a recipe to the mock simulation environment (i.e. </p>
<p>to the simulation context). Any recipes that your archetype expects to find in the simulation context must be added this way; if the xml configuration snippet for the archetype being tested contains a recipe name, add it with this function. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00211">211</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a20cb13b8d338ec41fb977cbcc29dad79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20cb13b8d338ec41fb977cbcc29dad79">&#9670;&nbsp;</a></span>AddSink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1MockAgent.html">MockAgent</a> cyclus::MockSim::AddSink </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>commod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AddSink adds a sink facility that can request+receive material from the archetype being tested. </p>
<p>commod specifies the commodity the sink will request on. AddSink can be called multiple times to generate many sinks for the simulation. The returned <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a> object has several functions that can be called to configure the sink's behavior further. Don't forget to call the <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a> object's "Finalize" function when you are done configuring it. <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a>'s functions support chaining:</p>
<div class="fragment"><div class="line"><a class="code" href="classcyclus_1_1MockSim.html">cyclus::MockSim</a> sim(...);</div><div class="line">sim.AddSink(<span class="stringliteral">&quot;spent_mox&quot;</span>)</div><div class="line">   .start(7).lifetime(3).recipe(<span class="stringliteral">&quot;spent_fresh_mox&quot;</span>)</div><div class="line">   .Finalize();</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00205">205</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="af57d6256c07b7dd1a006e3de5d801ff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af57d6256c07b7dd1a006e3de5d801ff9">&#9670;&nbsp;</a></span>AddSource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1MockAgent.html">MockAgent</a> cyclus::MockSim::AddSource </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>commod</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AddSource adds a source facility that can offer/provide material to the archetype being tested. </p>
<p>commod specifies the commodity the source will offer on. AddSource can be called multiple times to generate many sources for the simulation. The returned <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a> object has several functions that can be called to configure the source's behavior further. Don't forget to call the <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a> object's "Finalize" function when you are done configuring it. <a class="el" href="classcyclus_1_1MockAgent.html" title="MockAgent is a template for accumulating configuration information used to generate a source or sink ...">MockAgent</a>'s functions support chaining:</p>
<div class="fragment"><div class="line"><a class="code" href="classcyclus_1_1MockSim.html">cyclus::MockSim</a> sim(...);</div><div class="line">sim.AddSource(<span class="stringliteral">&quot;fresh_mox&quot;</span>)</div><div class="line">   .start(7).lifetime(3).recipe(<span class="stringliteral">&quot;mox_fuel&quot;</span>)</div><div class="line">   .Finalize();</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00199">199</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a04dcb9b3cb773f76b3b7e24e3e8cfa65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04dcb9b3cb773f76b3b7e24e3e8cfa65">&#9670;&nbsp;</a></span>context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1Context.html">Context</a>* cyclus::MockSim::context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the context for the mock simulation environment. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8h_source.html#l00227">227</a> of file <a class="el" href="mock__sim_8h_source.html">mock_sim.h</a>.</p>

</div>
</div>
<a id="a9d1caea21dddf3174b59ae8e64e2b74d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d1caea21dddf3174b59ae8e64e2b74d">&#9670;&nbsp;</a></span>db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1SqliteBack.html">SqliteBack</a> &amp; cyclus::MockSim::db </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the underlying in-memory database containing results for the simulation. </p>
<p>Run must be called before the database will contain anything. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00236">236</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a802dd8c8efd62e99bc28bbe9ba659466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a802dd8c8efd62e99bc28bbe9ba659466">&#9670;&nbsp;</a></span>DummyProto() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cyclus::MockSim::DummyProto </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a dummy prototype to the simulation that can be used by institutions and other agents for deployment/decommission testing. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00165">165</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="aeab2f78dd4099a350f30bc2519bb5049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab2f78dd4099a350f30bc2519bb5049">&#9670;&nbsp;</a></span>DummyProto() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cyclus::MockSim::DummyProto </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>commod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a dummy prototype to the simulation that can be used by institutions and other agents for demand-driven deployment testing. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00179">179</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a8852e6fa1abb5b0a0c1c785fe482fedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8852e6fa1abb5b0a0c1c785fe482fedd">&#9670;&nbsp;</a></span>GetMaterial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1Material.html#a7ccfc89ee031403e889e16c9f72a4c24">Material::Ptr</a> cyclus::MockSim::GetMaterial </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reconstructs a material object from the simulation results database with the given resource state id. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00228">228</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="a1ac44fdf5871792df87cc6cd225961aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ac44fdf5871792df87cc6cd225961aa">&#9670;&nbsp;</a></span>GetProduct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1Product.html#a6c3f8020c3bc4cc95cced9c29e7f9c14">Product::Ptr</a> cyclus::MockSim::GetProduct </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reconstructs a product object from the simulation results database with the given resource state id. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00232">232</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<a id="aeaf44f17a5c3b4d8ab9575ebece85bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaf44f17a5c3b4d8ab9575ebece85bdf">&#9670;&nbsp;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cyclus::MockSim::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the simulation. </p>
<p>This can only be called once. After the simulation has been run, this <a class="el" href="classcyclus_1_1MockSim.html" title="MockSim is a helper for running full simulations entirely in-code to test archetypes/agents without h...">MockSim</a> object CANNOT be reused to run other simulations. Run returns the agent ID for the agent being tested for use in queries. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8cc_source.html#l00215">215</a> of file <a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7efe5415fa56ceec7313baf5a6303dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efe5415fa56ceec7313baf5a6303dfa">&#9670;&nbsp;</a></span>agent</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcyclus_1_1Agent.html">Agent</a>* cyclus::MockSim::agent</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the agent being tested by the mock simulation environment. </p>

<p class="definition">Definition at line <a class="el" href="mock__sim_8h_source.html#l00230">230</a> of file <a class="el" href="mock__sim_8h_source.html">mock_sim.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mock__sim_8h_source.html">mock_sim.h</a></li>
<li><a class="el" href="mock__sim_8cc_source.html">mock_sim.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
